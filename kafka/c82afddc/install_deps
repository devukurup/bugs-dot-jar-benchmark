#!/bin/bash
apt-get update
DEBIAN_FRONTEND=noninteractive apt-get install -y --no-install-recommends \
    openjdk-8-jdk \
    wget \
    gradle

# Update Java alternatives
JAVA_VER="8"
if [ -n "$JAVA_VER" ] && [ "$JAVA_VER" != "8" ]; then
    update-alternatives --set java /usr/lib/jvm/java-${JAVA_VER}-openjdk-amd64/bin/java 2>/dev/null || true
    update-alternatives --set javac /usr/lib/jvm/java-${JAVA_VER}-openjdk-amd64/bin/javac 2>/dev/null || true
    export JAVA_HOME=/usr/lib/jvm/java-${JAVA_VER}-openjdk-amd64
    echo "export JAVA_HOME=/usr/lib/jvm/java-${JAVA_VER}-openjdk-amd64" >> /etc/environment
fi
